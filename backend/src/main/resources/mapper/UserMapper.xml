<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.studygram.mapper.UserMapper">
    <select id="findByUserIdx" resultType="User">
        select * from user where idx = #{idx}
    </select>
    <select id="findByUserName" parameterType="String" resultType="User">
        select * from user where user_name=#{userName}
    </select>

    <select id="findByClientId" parameterType="String" resultType="User">
        select * from user where client_id=#{clientId}
    </select>

    <select id="findByEmailAddr" parameterType="String" resultType="User">
        select * from user where email_addr=#{emailAddr}
    </select>

    <insert id="save" parameterType="User">
        insert into user (user_name, full_name, passwd, phone_num, email_addr, client_id, provider_type, role_type, profile_image_url)
            values(#{userName}, #{fullName}, #{passwd}, #{phoneNum}, #{emailAddr}, #{clientId}, #{providerType}, #{roleType}, #{profileImageUrl})
    </insert>

    <select id="selectAll" resultType="User">
        select * from user
    </select>

    <update id="updateUser" parameterType="User">
        update User set user_name = #{userName}
            where client_id = #{clientId}
        return user_name;
    </update>

</mapper>